(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{"56d7":function(t,e,a){"use strict";a.r(e);var n=a("924d"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"7bef":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}))},"924d":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(a("a34a")),i=a("802d"),r=a("2b74");function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,a,n,i,r,s){try{var u=t[r](s),d=u.value}catch(c){return void a(c)}u.done?e(d):Promise.resolve(d).then(n,i)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var r=t.apply(e,a);function s(t){u(r,n,i,s,d,"next",t)}function d(t){u(r,n,i,s,d,"throw",t)}s(void 0)}))}}var c={data:function(){return{addressData:{realname:"",mobile:"",address_details:"",address_name:"请选择地址",address:"",is_default:!1,province_id:"",city_id:"",area_id:""},multiArray:[[],[],[]],multiIndex:[0,0,0]}},onLoad:function(t){this.initData(t)},methods:{initData:function(){var e=d(n.default.mark((function e(a){var i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="新增收货地址","edit"!==a.type){e.next=5;break}return i="编辑收货地址",e.next=5,this.getAddressDetail(a.id);case 5:return this.manageType=a.type,t.setNavigationBarTitle({title:i}),e.next=9,this.getProvinceList();case 9:case"end":return e.stop()}}),e,this)})));function a(t){return e.apply(this,arguments)}return a}(),getAddressDetail:function(){var e=d(n.default.mark((function e(a){var r=this;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"加载中..."}),e.next=3,this.$get("".concat(i.addressDetail),{id:a}).then(function(){var e=d(n.default.mark((function e(a){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:200===a.code?r.addressData=a.data:t.showToast({title:a.message,icon:"none"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e,this)})));function a(t){return e.apply(this,arguments)}return a}(),getProvinceList:function(){var e=d(n.default.mark((function e(){var a,i,s,u,c,l,o,h,f,m=this;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=0,i=0,s=0,u=null,c=null,l=null,o=null,h=null,f=null,e.next=11,this.$get("".concat(r.provinceList)).then(function(){var e=d(n.default.mark((function e(p){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!==p.code){e.next=7;break}return m.multiArray[0]=p.data,m.addressData.province_id?p.data.forEach((function(t,e){parseInt(t.id,10)==parseInt(m.addressData.province_id,10)&&(a=e,u=t.id,o=t.title)})):(u=m.multiArray[0][0].id,o=m.multiArray[0][0].title),e.next=5,m.$get("".concat(r.provinceList),{pid:u}).then(function(){var e=d(n.default.mark((function e(d){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!==d.code){e.next=7;break}return m.multiArray[1]=d.data,m.addressData.city_id?d.data.forEach((function(t,e){parseInt(t.id,10)==parseInt(m.addressData.city_id,10)&&(i=e,c=t.id,h=t.title)})):(c=m.multiArray[1][0].id,h=m.multiArray[1][0].title),e.next=5,m.$get("".concat(r.provinceList),{pid:c}).then((function(e){200===e.code?(m.multiArray[2]=e.data,m.addressData.area_id?e.data.forEach((function(t,e){parseInt(t.id,10)==parseInt(m.addressData.area_id,10)&&(s=e,l=t.id,f=t.title)})):(l=m.multiArray[2][0].id,f=m.multiArray[2][0].title),m.multiIndex=[a,i,s],m.addressData.province_id=u,m.addressData.city_id=c,m.addressData.area_id=l,m.addressData.address_name="".concat(o,", ").concat(h,", ").concat(f)):t.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(t)}));case 5:e.next=8;break;case 7:t.showToast({title:d.message,icon:"none"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 5:e.next=8;break;case 7:t.showToast({title:p.message,icon:"none"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 11:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),bindMultiPickerColumnChange:function(){var e=d(n.default.mark((function e(a){var i,s,u,c,l,o,h,f,m,p=this;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.multiIndex[a.detail.column]=a.detail.value,i=0,s=0,u=0,c=null,l=null,o=null,h=null,f=null,m=null,e.t0=a.detail.column,e.next=0===e.t0?13:1===e.t0?23:2===e.t0?40:61;break;case 13:e.t1=this.multiIndex[0],e.next=e.t1===this.multiIndex[0]?16:22;break;case 16:return c=this.multiArray[0][a.detail.value].id,h=this.multiArray[0][a.detail.value].title,t.showLoading({title:"加载中..."}),e.next=21,this.$get("".concat(r.provinceList),{pid:this.multiArray[0][a.detail.value].id}).then(function(){var e=d(n.default.mark((function e(s){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!==s.code){e.next=11;break}return p.multiArray[1]=s.data,l=p.multiArray[1][0].id,f=p.multiArray[1][0].title,i=a.detail.value,p.multiIndex=[i,0,0],t.showLoading({title:"加载中..."}),e.next=9,p.$get("".concat(r.provinceList),{pid:p.multiArray[1][a.detail.column].id}).then((function(e){200===e.code?(p.multiArray[2]=e.data,o=p.multiArray[2][0].id,m=p.multiArray[2][0].title):t.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(t)}));case 9:e.next=12;break;case 11:t.showToast({title:s.message,icon:"none"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 21:return e.abrupt("break",22);case 22:return e.abrupt("break",61);case 23:e.t2=this.multiIndex[0],e.next=e.t2===this.multiIndex[0]?26:39;break;case 26:e.t3=this.multiIndex[1],e.next=e.t3===this.multiIndex[1]?29:38;break;case 29:return c=this.multiArray[0][this.multiIndex[0]].id,h=this.multiArray[0][this.multiIndex[0]].title,l=this.multiArray[1][a.detail.value].id,f=this.multiArray[1][a.detail.value].title,s=a.detail.value,this.multiIndex=[this.multiIndex[0],s,0],e.next=37,this.$get("".concat(r.provinceList),{pid:this.multiArray[1][a.detail.value].id}).then((function(e){200===e.code?p.multiArray[2]=e.data:t.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(t)}));case 37:return e.abrupt("break",38);case 38:return e.abrupt("break",39);case 39:return e.abrupt("break",61);case 40:e.t4=this.multiIndex[0],e.next=e.t4===this.multiIndex[0]?43:60;break;case 43:e.t5=this.multiIndex[1],e.next=e.t5===this.multiIndex[1]?46:59;break;case 46:e.t6=this.multiIndex[2],e.next=e.t6===this.multiIndex[2]?49:58;break;case 49:return c=this.multiArray[0][this.multiIndex[0]].id,h=this.multiArray[0][this.multiIndex[0]].title,l=this.multiArray[1][this.multiIndex[1]].id,f=this.multiArray[1][this.multiIndex[1]].title,o=this.multiArray[2][a.detail.value].id,m=this.multiArray[2][a.detail.value].title,u=a.detail.value,this.multiIndex=[this.multiIndex[0],this.multiIndex[1],u],e.abrupt("break",58);case 58:return e.abrupt("break",59);case 59:return e.abrupt("break",60);case 60:return e.abrupt("break",61);case 61:this.addressData.address_name="".concat(h,", ").concat(f,", ").concat(m),this.addressData.province_id=c,this.addressData.city_id=l,this.addressData.area_id=o,this.$forceUpdate();case 66:case"end":return e.stop()}}),e,this)})));function a(t){return e.apply(this,arguments)}return a}(),handleRealNameChange:function(t){this.addressData.realname=t.detail.value},bindAddressDetailsChange:function(t){this.addressData.address_details=t.detail.value},handleMobileChange:function(t){this.addressData.mobile=t.detail.value},switchChange:function(t){this.addressData.is_default=t.detail.value},chooseLocation:function(){var e=this;t.chooseLocation({success:function(t){e.addressData.addressName=t.name,e.addressData.address=t.name}})},confirm:function(){var t=this.addressData;t.realname?/(^1[3|4|5|7|8][0-9]{9}$)/.test(t.mobile)?"edit"===this.manageType?this.handleAddressUpdate(t):this.handleAddressCreate(t):this.$api.msg("请输入正确的手机号码"):this.$api.msg("请填写收货人姓名")},handleAddressUpdate:function(){var e=d(n.default.mark((function e(a){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"收货地址修改中..."}),e.next=3,this.$put("".concat(i.addressUpdate,"?id=").concat(a.id),{realname:a.realname,mobile:a.mobile,address_details:a.address_details,is_default:a.is_default?1:0,province_id:a.province_id,city_id:a.city_id,area_id:a.area_id}).then((function(e){200===e.code?(t.showToast({title:"恭喜您, 收货地址修改成功！",icon:"none"}),t.navigateBack()):t.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e,this)})));function a(t){return e.apply(this,arguments)}return a}(),handleAddressCreate:function(){var e=d(n.default.mark((function e(a){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"创建中..."}),e.next=3,this.$post("".concat(i.addressCreate),{realname:a.realname,mobile:a.mobile,address_details:a.address_details,is_default:a.is_default?1:0,province_id:a.province_id,city_id:a.city_id,area_id:a.area_id}).then((function(e){200===e.code?(t.showToast({title:"恭喜您, 收货地址创建成功！",icon:"none"}),t.navigateBack()):t.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e,this)})));function a(t){return e.apply(this,arguments)}return a}()}};e.default=c}).call(this,a("543d")["default"])},"94bb":function(t,e,a){},c317:function(t,e,a){"use strict";a.r(e);var n=a("7bef"),i=a("56d7");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("e607");var s=a("2877"),u=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=u.exports},e607:function(t,e,a){"use strict";var n=a("94bb"),i=a.n(n);i.a},f054:function(t,e,a){"use strict";(function(t){a("6cdc"),a("921b");n(a("66fd"));var e=n(a("c317"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])}},[["f054","common/runtime","common/vendor"]]]);
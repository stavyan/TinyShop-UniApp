(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-history-coupon"],{"309e":function(e,t,i){"use strict";var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i("75fc"));i("96cf");var n=a(i("3b8d")),r=i("802d"),s=a(i("09c2")),d=a(i("d138")),l=a(i("7fcc")),c={components:{uniLoadMore:s.default,empty:d.default,uniCountDown:l.default},data:function(){return{couponList:[],state:2,token:null,tabCurrentIndex:0,loadingType:"more",navList:[{state:2,text:"已使用",loadingType:"more",orderList:[]},{state:3,text:"已过期",loadingType:"more",orderList:[]}],page:1}},filters:{time:function(e){return moment(1e3*e).format("YY/MM/DD HH:mm")}},onLoad:function(){this.initData()},onPageScroll:function(e){},onPullDownRefresh:function(){this.page=1,this.couponList=[],this.getMyCouponList("refresh")},onReachBottom:function(){this.page++,this.getMyCouponList()},methods:{changeTab:function(e){this.tabCurrentIndex=e.target.current,this.state=this.navList[this.tabCurrentIndex].state,this.getMyCouponList()},tabClick:function(e){this.couponList=[],this.tabCurrentIndex=e,this.state=this.navList[this.tabCurrentIndex].state,this.getMyCouponList()},initData:function(){this.token=uni.getStorageSync("accessToken")||void 0,this.token&&this.getMyCouponList()},navTo:function(e){this.token||(e="/pages/public/login"),"login"!==e&&uni.navigateTo({url:e})},getMyCouponList:function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"加载中..."}),e.next=3,this.$get("".concat(r.myCouponList),{page:this.page,state:this.state}).then((function(e){"refresh"===t&&uni.stopPullDownRefresh(),200===e.code?(i.loadingType=10===e.data.length?"more":"nomore",i.couponList=[].concat((0,o.default)(i.couponList),(0,o.default)(e.data))):uni.showToast({title:e.message,icon:"none"})})).catch((function(e){"refresh"===t&&uni.stopPullDownRefresh(),console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}};t.default=c},"3d49":function(e,t,i){"use strict";i.r(t);var a=i("fc07"),o=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},4952:function(e,t,i){"use strict";var a=i("a60a"),o=i.n(a);o.a},"4b03":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-countdown"},[e.showDay?i("v-uni-view",{staticClass:"uni-countdown__number",style:{borderColor:e.borderColor,color:e.color,background:e.backgroundColor}},[e._v(e._s(e.d))]):e._e(),e.showDay?i("v-uni-view",{staticClass:"uni-countdown__splitor",style:{color:e.splitorColor}},[e._v("天")]):e._e(),i("v-uni-view",{staticClass:"uni-countdown__number",style:{borderColor:e.borderColor,color:e.color,background:e.backgroundColor}},[e._v(e._s(e.h))]),i("v-uni-view",{staticClass:"uni-countdown__splitor",style:{color:e.splitorColor}},[e._v(e._s(e.showColon?":":"时"))]),i("v-uni-view",{staticClass:"uni-countdown__number",style:{borderColor:e.borderColor,color:e.color,background:e.backgroundColor}},[e._v(e._s(e.i))]),i("v-uni-view",{staticClass:"uni-countdown__splitor",style:{color:e.splitorColor}},[e._v(e._s(e.showColon?":":"分"))]),i("v-uni-view",{staticClass:"uni-countdown__number",style:{borderColor:e.borderColor,color:e.color,background:e.backgroundColor}},[e._v(e._s(e.s))]),e.showColon?e._e():i("v-uni-view",{staticClass:"uni-countdown__splitor",style:{color:e.splitorColor}},[e._v("秒")])],1)},o=[];i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}))},"51f2":function(e,t,i){t=e.exports=i("24fb")(!1),t.push([e.i,".uni-countdown[data-v-033b3fa4]{padding:%?2?% 0;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.uni-countdown__splitor[data-v-033b3fa4]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;line-height:%?44?%;padding:0 %?5?%;font-size:%?28?%}.uni-countdown__number[data-v-033b3fa4]{line-height:%?44?%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:%?44?%;border-radius:%?6?%;margin:0 %?5?%;font-size:%?28?%;border:1px solid #000;font-size:%?24?%;padding:0 %?10?%}",""])},5956:function(e,t,i){"use strict";i.r(t);var a=i("af87"),o=i("5cf2");for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);i("a76f");var r=i("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"233159ae",null);t["default"]=s.exports},"5cf2":function(e,t,i){"use strict";i.r(t);var a=i("309e"),o=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},6843:function(e,t,i){var a=i("eff4");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("4f06").default;o("463dcbd7",a,!0,{sourceMap:!1,shadowMode:!1})},"7fcc":function(e,t,i){"use strict";i.r(t);var a=i("4b03"),o=i("3d49");for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);i("4952");var r=i("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"033b3fa4",null);t["default"]=s.exports},"802d":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectList=t.footPrintDel=t.footPrintList=t.couponReceive=t.orderList=t.myCouponList=t.couponList=t.addressDelete=t.addressUpdate=t.addressDetail=t.addressDefault=t.addressCreate=t.addressList=t.memberUpdate=t.memberInfo=void 0;var a="/addons/rf-tiny-shop/v1/member/member/index";t.memberInfo=a;var o="/addons/rf-tiny-shop/v1/member/member/update";t.memberUpdate=o;var n="/addons/rf-tiny-shop/v1/member/address/index";t.addressList=n;var r="/addons/rf-tiny-shop/v1/member/address/default";t.addressDefault=r;var s="/addons/rf-tiny-shop/v1/member/address/view";t.addressDetail=s;var d="/addons/rf-tiny-shop/v1/member/address/create";t.addressCreate=d;var l="/addons/rf-tiny-shop/v1/member/address/update";t.addressUpdate=l;var c="/addons/rf-tiny-shop/v1/member/address/delete";t.addressDelete=c;var u="/addons/rf-tiny-shop/v1/marketing/coupon-type/index";t.couponList=u;var f="/addons/rf-tiny-shop/v1/member/coupon/index";t.myCouponList=f;var b="/addons/rf-tiny-shop/v1/marketing/coupon-type/create";t.couponReceive=b;var p="/addons/rf-tiny-shop/v1/member/order/index";t.orderList=p;var v="/addons/rf-tiny-shop/v1/member/footprint/index";t.footPrintList=v;var m="/addons/rf-tiny-shop/v1/member/footprint/delete";t.footPrintDel=m;var h="/addons/rf-tiny-shop/v1/member/collect/index";t.collectList=h},a60a:function(e,t,i){var a=i("51f2");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("4f06").default;o("c25bf178",a,!0,{sourceMap:!1,shadowMode:!1})},a76f:function(e,t,i){"use strict";var a=i("6843"),o=i.n(a);o.a},af87:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"navbar"},e._l(e.navList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"nav-item",class:{current:e.tabCurrentIndex===a},on:{click:function(t){t=e.$handleEvent(t),e.tabClick(a)}}},[e._v(e._s(t.text))])})),1),i("v-uni-swiper",{staticClass:"swiper-box",attrs:{current:e.tabCurrentIndex,duration:"300"},on:{change:function(t){t=e.$handleEvent(t),e.changeTab(t)}}},e._l(e.navList,(function(t,a){return i("v-uni-swiper-item",{key:a,staticClass:"tab-content"},[i("v-uni-scroll-view",{staticClass:"list-scroll-content mask-content",attrs:{"scroll-y":""},on:{scrolltolower:function(t){t=e.$handleEvent(t),e.loadData(t)}}},[0===e.couponList.length?i("empty"):e._e(),e._l(e.couponList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"coupon-item"},[i("v-uni-view",{staticClass:"con"},[i("v-uni-view",{staticClass:"left",on:{click:function(i){i=e.$handleEvent(i),e.getCoupon(t.id)}}},[i("v-uni-text",{staticClass:"title"},[e._v(e._s(t.title))]),i("v-uni-text",{staticClass:"time"},[e._v("有效期 "+e._s(e._f("time")(t.start_time))+" - "+e._s(e._f("time")(t.end_time)))])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"price"},[e._v(e._s(t.money))]),i("v-uni-text",[e._v("满"+e._s(t.at_least)+"可用")])],1),i("v-uni-view",{staticClass:"circle l"}),i("v-uni-view",{staticClass:"circle r"})],1),i("v-uni-view",{staticClass:"tips"},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.range_type&&t.max_fetch,expression:"item.range_type && item.max_fetch"}]},[e._v(e._s(0===parseInt(t.range_type,10)?"部分产品使用":"全场产品使用")+"  领取上限"+e._s(t.max_fetch))]),i("v-uni-text",[e._v(e._s(0===parseInt(t.term_of_validity_type,10)?"固定时间":"领取之日起")+"生效")])],1)],1)})),i("uni-load-more",{attrs:{status:e.loadingType}})],2)],1)})),1)],1)},o=[];i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}))},eff4:function(e,t,i){t=e.exports=i("24fb")(!1),t.push([e.i,'.content[data-v-233159ae],uni-page-body[data-v-233159ae]{background:#f8f8f8;height:100%}.swiper-box[data-v-233159ae]{height:calc(100% - 40px)}.list-scroll-content[data-v-233159ae]{height:100%}.navbar[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;height:40px;padding:0 5px;background:#fff;box-shadow:0 1px 5px rgba(0,0,0,.06);position:relative;z-index:10}.navbar .nav-item[data-v-233159ae]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:100%;font-size:15px;color:#303133;position:relative}.navbar .nav-item.current[data-v-233159ae]{color:#fa436a}.navbar .nav-item.current[data-v-233159ae]:after{content:"";position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:44px;height:0;border-bottom:2px solid #fa436a}.uni-swiper-item[data-v-233159ae]{height:auto}.order-item[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding-left:%?30?%;background:#fff;margin-top:%?16?%}.order-item .i-top[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?80?%;padding-right:%?30?%;font-size:%?28?%;color:#303133;position:relative}.order-item .i-top .time[data-v-233159ae]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.order-item .i-top .state[data-v-233159ae]{color:#fa436a}.order-item .i-top .del-btn[data-v-233159ae]{padding:%?10?% 0 %?10?% %?36?%;font-size:%?32?%;color:#909399;position:relative}.order-item .i-top .del-btn[data-v-233159ae]:after{content:"";width:0;height:%?30?%;border-left:1px solid #dcdfe6;position:absolute;left:%?20?%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.order-item .goods-box[data-v-233159ae]{height:%?160?%;padding:%?20?% 0;white-space:nowrap}.order-item .goods-box .goods-item[data-v-233159ae]{width:%?120?%;height:%?120?%;display:inline-block;margin-right:%?24?%}.order-item .goods-box .goods-img[data-v-233159ae]{display:block;width:100%;height:100%}.order-item .goods-box-single[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?% 0}.order-item .goods-box-single .goods-img[data-v-233159ae]{display:block;width:%?120?%;height:%?120?%}.order-item .goods-box-single .right[data-v-233159ae]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:0 %?30?% 0 %?24?%;overflow:hidden}.order-item .goods-box-single .right .title[data-v-233159ae]{font-size:%?30?%;color:#303133;line-height:1}.order-item .goods-box-single .right .attr-box[data-v-233159ae]{font-size:%?26?%;color:#909399;padding:%?10?% %?12?%}.order-item .goods-box-single .right .price[data-v-233159ae]{font-size:%?30?%;color:#303133}.order-item .goods-box-single .right .price[data-v-233159ae]:before{content:"￥";font-size:%?24?%;margin:0 %?2?% 0 %?8?%}.order-item .price-box[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline;padding:%?20?% %?30?%;font-size:%?26?%;color:#909399}.order-item .price-box .num[data-v-233159ae]{margin:0 %?8?%;color:#303133}.order-item .price-box .price[data-v-233159ae]{font-size:%?32?%;color:#303133}.order-item .price-box .price[data-v-233159ae]:before{content:"￥";font-size:%?24?%;margin:0 %?2?% 0 %?8?%}.order-item .action-box[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%;position:relative;padding-right:%?30?%}.order-item .action-btn[data-v-233159ae]{width:%?160?%;height:%?60?%;margin:0;margin-left:%?24?%;padding:0;text-align:center;line-height:%?60?%;font-size:%?26?%;color:#303133;background:#fff;border-radius:100px}.order-item .action-btn[data-v-233159ae]:after{border-radius:100px}.order-item .action-btn.recom[data-v-233159ae]{background:#fff9f9;color:#fa436a}.order-item .action-btn.recom[data-v-233159ae]:after{border-color:#f7bcc8}.uni-load-more[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?80?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.uni-load-more__text[data-v-233159ae]{font-size:%?28?%;color:#999}.uni-load-more__img[data-v-233159ae]{height:24px;width:24px;margin-right:10px}.uni-load-more__img>uni-view[data-v-233159ae]{position:absolute}.uni-load-more__img>uni-view uni-view[data-v-233159ae]{width:6px;height:2px;border-top-left-radius:1px;border-bottom-left-radius:1px;background:#999;position:absolute;opacity:.2;-webkit-transform-origin:50%;transform-origin:50%;-webkit-animation:load-data-v-233159ae 1.56s ease infinite;animation:load-data-v-233159ae 1.56s ease infinite}.uni-load-more__img>uni-view uni-view[data-v-233159ae]:first-child{-webkit-transform:rotate(90deg);transform:rotate(90deg);top:2px;left:9px}.uni-load-more__img>uni-view uni-view[data-v-233159ae]:nth-child(2){-webkit-transform:rotate(180deg);transform:rotate(180deg);top:11px;right:0}.uni-load-more__img>uni-view uni-view[data-v-233159ae]:nth-child(3){-webkit-transform:rotate(270deg);transform:rotate(270deg);bottom:2px;left:9px}.uni-load-more__img>uni-view uni-view[data-v-233159ae]:nth-child(4){top:11px;left:0}.load1[data-v-233159ae],.load2[data-v-233159ae],.load3[data-v-233159ae]{height:24px;width:24px}.load2[data-v-233159ae]{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.load3[data-v-233159ae]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.load1 uni-view[data-v-233159ae]:first-child{-webkit-animation-delay:0s;animation-delay:0s}.load2 uni-view[data-v-233159ae]:first-child{-webkit-animation-delay:.13s;animation-delay:.13s}.load3 uni-view[data-v-233159ae]:first-child{-webkit-animation-delay:.26s;animation-delay:.26s}.load1 uni-view[data-v-233159ae]:nth-child(2){-webkit-animation-delay:.39s;animation-delay:.39s}.load2 uni-view[data-v-233159ae]:nth-child(2){-webkit-animation-delay:.52s;animation-delay:.52s}.load3 uni-view[data-v-233159ae]:nth-child(2){-webkit-animation-delay:.65s;animation-delay:.65s}.load1 uni-view[data-v-233159ae]:nth-child(3){-webkit-animation-delay:.78s;animation-delay:.78s}.load2 uni-view[data-v-233159ae]:nth-child(3){-webkit-animation-delay:.91s;animation-delay:.91s}.load3 uni-view[data-v-233159ae]:nth-child(3){-webkit-animation-delay:1.04s;animation-delay:1.04s}.load1 uni-view[data-v-233159ae]:nth-child(4){-webkit-animation-delay:1.17s;animation-delay:1.17s}.load2 uni-view[data-v-233159ae]:nth-child(4){-webkit-animation-delay:1.3s;animation-delay:1.3s}.load3 uni-view[data-v-233159ae]:nth-child(4){-webkit-animation-delay:1.43s;animation-delay:1.43s}@-webkit-keyframes load-data-v-233159ae{0%{opacity:1}to{opacity:.2}}.coupon-item[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;margin:%?20?% %?24?%;background:#fff}.coupon-item .con[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative;height:%?120?%;padding:0 %?30?%}.coupon-item .con[data-v-233159ae]:after{position:absolute;left:0;bottom:0;content:"";width:100%;height:0;border-bottom:1px dashed #f3f3f3;-webkit-transform:scaleY(50%);transform:scaleY(50%)}.coupon-item .left[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;height:%?100?%}.coupon-item .title[data-v-233159ae]{font-size:%?32?%;color:#303133;margin-bottom:%?10?%}.coupon-item .time[data-v-233159ae]{font-size:%?24?%;color:#909399}.coupon-item .right[data-v-233159ae]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?26?%;color:#606266;height:%?100?%}.coupon-item .price[data-v-233159ae]{font-size:%?44?%;color:#fa436a}.coupon-item .price[data-v-233159ae]:before{content:"￥";font-size:%?34?%}.coupon-item .tips[data-v-233159ae]{font-size:%?24?%;color:#909399;line-height:%?60?%;padding-left:%?30?%;overflow:hidden;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-right:%?30?%}.coupon-item .circle[data-v-233159ae]{position:absolute;left:%?-6?%;bottom:%?-10?%;z-index:10;width:%?20?%;height:%?20?%;background:#f3f3f3;border-radius:100px}.coupon-item .circle.r[data-v-233159ae]{left:auto;right:%?-6?%}body.?%PAGE?%[data-v-233159ae]{background:#f8f8f8}',""])},fc07:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("c5f6");var a={name:"UniCountDown",props:{showDay:{type:Boolean,default:!0},showColon:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},borderColor:{type:String,default:"#000000"},color:{type:String,default:"#000000"},splitorColor:{type:String,default:"#000000"},day:{type:Number,default:0},hour:{type:Number,default:0},minute:{type:Number,default:0},second:{type:Number,default:0}},data:function(){return{timer:null,d:"00",h:"00",i:"00",s:"00",leftTime:0,seconds:0}},created:function(e){var t=this;this.seconds=this.toSeconds(this.day,this.hour,this.minute,this.second),this.countDown(),this.timer=setInterval((function(){t.seconds--,t.seconds<0?t.timeUp():t.countDown()}),1e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{toSeconds:function(e,t,i,a){return 60*e*60*24+60*t*60+60*i+a},timeUp:function(){clearInterval(this.timer),this.$emit("timeup")},countDown:function(){var e=this.seconds,t=0,i=0,a=0,o=0;e>0?(t=Math.floor(e/86400),i=Math.floor(e/3600)-24*t,a=Math.floor(e/60)-24*t*60-60*i,o=Math.floor(e)-24*t*60*60-60*i*60-60*a):this.timeUp(),t<10&&(t="0"+t),i<10&&(i="0"+i),a<10&&(a="0"+a),o<10&&(o="0"+o),this.d=t,this.h=i,this.i=a,this.s=o}}};t.default=a}}]);
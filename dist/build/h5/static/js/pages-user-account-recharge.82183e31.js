(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-account-recharge"],{"00ea":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"uni-page-body[data-v-5d8da4d0]{background-color:#fff}.block[data-v-5d8da4d0]{width:100%;padding:%?20?%}.block .title[data-v-5d8da4d0]{width:100%;font-size:%?34?%}.block .content .my[data-v-5d8da4d0]{width:100%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?32?%;border-bottom:solid %?1?% #eee}.block .content .my .balance[data-v-5d8da4d0]{margin-right:%?6?%;color:#fa436a;font-size:%?36?%}.block .content .amount[data-v-5d8da4d0]{width:100%}.block .content .amount .list[data-v-5d8da4d0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-top:%?20?%;-webkit-flex-wrap:wrap;flex-wrap:wrap}.block .content .amount .list .box[data-v-5d8da4d0]{width:31%;margin-bottom:%?20?%;height:%?120?%;text-align:center;border-radius:%?10?%;box-shadow:%?0?% %?5?% %?20?% rgba(0,0,0,.05);background-color:#f1f1f1;color:333}.block .content .amount .list .box.on[data-v-5d8da4d0]{background-color:#f06c7a;color:#fff}.block .content .amount .list .box.on .give[data-v-5d8da4d0]{color:#fff}.block .content .amount .list .box .real[data-v-5d8da4d0]{font-size:%?32?%;margin-top:%?10?%}.block .content .amount .list .box .give[data-v-5d8da4d0]{display:block;font-size:%?24?%;color:#fa436a}.block .content .amount .num[data-v-5d8da4d0]{margin-top:%?10?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .amount .num .text[data-v-5d8da4d0]{padding-right:%?10?%;font-size:%?30?%}.block .content .amount .num .give[data-v-5d8da4d0]{font-size:%?24?%;color:#fa436a}.block .content .amount .num .input[data-v-5d8da4d0]{width:28.2vw;border-bottom:solid %?2?% #999;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .amount .num .input uni-input[data-v-5d8da4d0]{margin:0 %?20?%;height:%?60?%;font-size:%?30?%;color:#f06c7a;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .pay-list[data-v-5d8da4d0]{width:100%;border-bottom:solid %?1?% #eee}.block .content .pay-list .row[data-v-5d8da4d0]{width:100%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.block .content .pay-list .row .icon[data-v-5d8da4d0]{width:%?100?%;font-size:%?52?%;margin-left:%?15?%}.block .content .pay-list .row .iconerjiye-yucunkuan[data-v-5d8da4d0]{color:#fe8e2e}.block .content .pay-list .row .iconweixinzhifu[data-v-5d8da4d0]{color:#36cb59}.block .content .pay-list .row .iconalipay[data-v-5d8da4d0]{color:#01aaef}.block .content .pay-list .row .center[data-v-5d8da4d0]{width:100%;font-size:%?30?%}.block .content .pay-list .row .right[data-v-5d8da4d0]{width:%?100?%;-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.pay[data-v-5d8da4d0]{margin-top:%?20?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-wrap:wrap;flex-wrap:wrap}.pay .btn[data-v-5d8da4d0]{width:70%;height:%?80?%;border-radius:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#fff;background-color:#f06c7a;box-shadow:%?0?% %?5?% %?10?% rgba(0,0,0,.2)}.pay .tis[data-v-5d8da4d0]{margin-top:%?10?%;width:100%;font-size:%?24?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline;color:#999}.pay .tis .terms[data-v-5d8da4d0]{color:#5a9ef7}.rmbLogo[data-v-5d8da4d0]{font-size:%?40?%}uni-button[data-v-5d8da4d0]{background-color:#007aff;color:#fff}.uni-h1.uni-center[data-v-5d8da4d0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.price[data-v-5d8da4d0]{border-bottom:1px solid #eee;width:%?200?%;height:%?80?%;padding-bottom:%?4?%}.ipaPayBtn[data-v-5d8da4d0]{margin-top:%?30?%}body.?%PAGE?%[data-v-5d8da4d0]{background-color:#fff}",""]),e.exports=t},"228b":function(e,t,n){"use strict";n.r(t);var i=n("ca35"),o=n("89e6");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("b051");var r=n("2877"),c=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,"5d8da4d0",null);t["default"]=c.exports},"2b74":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyAnnounceView=t.notifyAnnounceIndex=t.wechatConfig=t.configList=t.payCreate=t.advList=t.transmitCreate=t.collectDel=t.collectCreate=t.provinceList=void 0;var i="/tiny-shop/v1/common/provinces/index";t.provinceList=i;var o="/tiny-shop/v1/common/collect/create";t.collectCreate=o;var a="/tiny-shop/v1/common/collect/delete";t.collectDel=a;var r="/tiny-shop/v1/common/transmit/create";t.transmitCreate=r;var c="/tiny-shop/v1/common/adv/index";t.advList=c;var s="/tiny-shop/v1/common/config/index";t.configList=s;var d="/tiny-shop/v1/common/pay/create";t.payCreate=d;var u="/tiny-shop/v1/third-party/wechat-js-sdk";t.wechatConfig=u;var l="/tiny-shop/v1/common/notify-announce/index";t.notifyAnnounceIndex=l;var p="/tiny-shop/v1/common/notify-announce/view";t.notifyAnnounceView=p},"682f":function(e,t,n){var i=n("00ea");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("f5533d5c",i,!0,{sourceMap:!1,shadowMode:!1})},"802d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderCustomerRefundClose=t.orderCustomerRefundApply=t.orderCustomerSalesReturn=t.rechargeConfigIndex=t.thirdPartyAuthDelete=t.thirdPartyAuthList=t.opinionDetail=t.opinionCreate=t.opinionList=t.uploadBase64Image=t.uploadImage=t.orderInvoiceList=t.invoiceDel=t.invoiceDefault=t.invoiceDetail=t.invoiceUpdate=t.invoiceCreate=t.invoiceList=t.evaluateAgain=t.evaluateCreate=t.creditsLogList=t.collectList=t.footPrintDel=t.footPrintList=t.couponReceive=t.orderTakeDelivery=t.orderDelete=t.orderDetail=t.orderProductSalesReturn=t.closeOrderRefundApply=t.orderRefundApply=t.orderList=t.couponDetail=t.couponClear=t.myCouponList=t.couponList=t.addressDelete=t.addressUpdate=t.addressDetail=t.addressDefault=t.addressCreate=t.addressList=t.memberUpdate=t.memberInfo=void 0;var i=n("3e3e"),o="/tiny-shop/v1/member/member/index";t.memberInfo=o;var a="/tiny-shop/v1/member/member/update";t.memberUpdate=a;var r="/tiny-shop/v1/member/address/index";t.addressList=r;var c="/tiny-shop/v1/member/address/default";t.addressDefault=c;var s="/tiny-shop/v1/member/address/view";t.addressDetail=s;var d="/tiny-shop/v1/member/address/create";t.addressCreate=d;var u="/tiny-shop/v1/member/address/update";t.addressUpdate=u;var l="/tiny-shop/v1/member/address/delete";t.addressDelete=l;var p="/tiny-shop/v1/marketing/coupon-type/index";t.couponList=p;var f="/tiny-shop/v1/member/coupon/index";t.myCouponList=f;var m="/tiny-shop/v1/marketing/coupon-type/view";t.couponDetail=m;var v="/tiny-shop/v1/marketing/coupon-type/create";t.couponReceive=v;var h="/tiny-shop/v1/member/coupon/clear";t.couponClear=h;var g="/tiny-shop/v1/member/order/index";t.orderList=g;var y="/tiny-shop/v1/member/order/take-delivery";t.orderTakeDelivery=y;var b="/tiny-shop/v1/member/order-product/refund-apply";t.orderRefundApply=b;var w="/tiny-shop/v1/member/order-product/refund-sales-return";t.orderProductSalesReturn=w;var k="/tiny-shop/v1/member/order-product/refund-close";t.closeOrderRefundApply=k;var x="/tiny-shop/v1/member/order/view";t.orderDetail=x;var _="/tiny-shop/v1/member/order/delete";t.orderDelete=_;var I="/tiny-shop/v1/member/footprint/index";t.footPrintList=I;var C="/tiny-shop/v1/member/footprint/delete";t.footPrintDel=C;var S="/tiny-shop/v1/member/collect/index";t.collectList=S;var A="/tiny-shop/v1/member/credits-log/index";t.creditsLogList=A;var L="/tiny-shop/v1/member/evaluate/create";t.evaluateCreate=L;var T="/tiny-shop/v1/member/evaluate/again";t.evaluateAgain=T;var P="/tiny-shop/v1/member/invoice/index";t.invoiceList=P;var M="/tiny-shop/v1/member/invoice/create";t.invoiceCreate=M;var O="/tiny-shop/v1/member/invoice/update";t.invoiceUpdate=O;var D="/tiny-shop/v1/member/invoice/view";t.invoiceDetail=D;var j="/tiny-shop/v1/member/invoice/default";t.invoiceDefault=j;var R="/tiny-shop/v1/member/invoice/delete";t.invoiceDel=R;var V="/tiny-shop/v1/member/order-invoice/index";t.orderInvoiceList=V;var E="/tiny-shop/v1/member/opinion/index";t.opinionList=E;var B="/tiny-shop/v1/member/opinion/create";t.opinionCreate=B;var N="/tiny-shop/v1/member/opinion/view";t.opinionDetail=N;var U="/tiny-shop/v1/member/auth/index";t.thirdPartyAuthList=U;var W="/tiny-shop/v1/member/auth/delete";t.thirdPartyAuthDelete=W;var J="/tiny-shop/v1/member/recharge-config/index";t.rechargeConfigIndex=J;var z="/tiny-shop/v1/member/order-customer/apply";t.orderCustomerRefundApply=z;var Q="/tiny-shop/v1/member/order-customer/sales-return";t.orderCustomerSalesReturn=Q;var $="/tiny-shop/v1/member/order-customer/close";t.orderCustomerRefundClose=$;var G="".concat(i.baseUrl,"/tiny-shop/v1/common/file/images");t.uploadImage=G;var q="".concat(i.baseUrl,"/tiny-shop/v1/common/file/base64");t.uploadBase64Image=q},"89e6":function(e,t,n){"use strict";n.r(t);var i=n("d63f"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},b051:function(e,t,n){"use strict";var i=n("682f"),o=n.n(i);o.a},ca35:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[e._v("我的账户")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"my"},[e._v("我的账户余额："),n("v-uni-text",{staticClass:"balance"},[e._v(e._s(e.userInfo.account&&e.userInfo.account.user_money||"0"))]),e._v("元")],1)],1)],1),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[e._v("充值金额")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"amount"},[n("v-uni-view",{staticClass:"list"},e._l(e.amountList,(function(t,i){return n("v-uni-view",{key:i,staticClass:"box",class:{on:t.price==e.inputAmount},on:{click:function(n){n=e.$handleEvent(n),e.select(t)}}},[n("v-uni-view",{staticClass:"real"},[e._v(e._s(t.price)+"元")]),n("v-uni-text",{staticClass:"give"},[e._v("赠送 "+e._s(t.give_price)+"元")])],1)})),1),n("v-uni-view",{staticClass:"num"},[n("v-uni-view",{staticClass:"text"},[e._v("自定义充值金额")]),n("v-uni-view",{staticClass:"input"},[n("v-uni-input",{attrs:{type:"number"},on:{input:function(t){t=e.$handleEvent(t),e.handleInputAmountChange(t)}},model:{value:e.inputAmount,callback:function(t){e.inputAmount=t},expression:"inputAmount"}})],1),e.inputAmountGive>0?n("v-uni-text",{staticClass:"give"},[e._v("赠送 "+e._s(e.inputAmountGive)+"元")]):e._e()],1)],1)],1)],1),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[e._v("选择支付方式")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"pay-list"},[n("v-uni-view",{staticClass:"row",on:{click:function(t){t=e.$handleEvent(t),e.payType="1"}}},[n("i",{staticClass:"icon iconfont iconweixinzhifu"}),n("v-uni-view",{staticClass:"center"},[e._v("微信支付")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-radio",{attrs:{checked:"1"==e.payType,color:"#f06c7a"}})],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"pay"},[n("v-uni-view",{staticClass:"btn",on:{click:function(t){t=e.$handleEvent(t),e.weixinPay(t)}}},[e._v("立即充值")]),n("v-uni-view",{staticClass:"tis"},[e._v("点击立即充值，即代表您同意"),n("v-uni-view",{staticClass:"terms",on:{click:function(t){t=e.$handleEvent(t),e.toTipDetail(t)}}},[e._v("《充值协议》")])],1)],1),e.pageLoading?n("rf-loading"):e._e()],1)},o=[];n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},d63f:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("8e6e"),n("ac6a"),n("456d"),n("4917");var o=i(n("bd86"));n("96cf");var a=i(n("3b8d")),r=n("2b74"),c=i(n("dd8d")),s=n("7ded"),d=n("3e3e"),u=n("802d");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{inputAmount:0,inputAmountGive:0,amountList:[],payType:1,userInfo:{},loading:!1,providerList:[],code:null,pageLoading:!0}},onLoad:function(e){this.initData(e)},methods:{handleInputAmountChange:function(e){if(this.inputAmount=parseFloat(e.detail.value),this.inputAmount<this.amountList[0].price)this.inputAmountGive=0;else if(this.inputAmount>=this.amountList[this.amountList.length-1].price)this.inputAmountGive=this.amountList[this.amountList.length-1].give_price;else for(var t=0;t<this.amountList.length;t++)this.inputAmount>=this.amountList[t].price&&this.inputAmount<this.amountList[t+1].price&&(this.inputAmountGive=this.amountList[t].give_price)},weixinPay:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,this.isWechat()){e.next=4;break}return this.$api.msg("仅支持微信H5和微信小程序充值~"),e.abrupt("return");case 4:return e.next=6,this.$post("".concat(s.isBindingCheck),{oauth_client:"wechat"}).then(function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(i){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={},o.money=parseFloat(n.inputAmount),e.next=4,n.$post("".concat(r.payCreate),{order_group:"recharge",pay_type:1,trade_type:"js",data:JSON.stringify(o),openid:i.data.openid}).then((function(e){n.isWechat()?c.default.ready((function(){c.default.chooseWXPay(p({},e.data.config,{success:function(){t.getMemberInfo()},fail:function(e){uni.showModal({content:"支付失败,原因为: "+e.errMsg,showCancel:!1})}}))})):n.$api.msg("请复制当前地址进入微信进行充值~")})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMemberInfo:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$get(u.memberInfo).then((function(e){uni.setStorage({key:"userInfo",data:e.data}),t.userInfo=e.data||void 0}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toTipDetail:function(){uni.navigateTo({url:"/pages/set/about/detail?field=protocol_recharge&title=充值协议"})},initData:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.code=t.code,this.userInfo=uni.getStorageSync("userInfo")||void 0,e.next=4,this.$get("".concat(u.rechargeConfigIndex)).then((function(e){o.pageLoading=!1,o.amountList=e.data,o.inputAmount=e.data[0]&&e.data[0].price||.01,o.inputAmountGive=e.data[0]&&e.data[0].give_price||0})).catch((function(){o.pageLoading=!1}));case 4:if(!this.isWechat()||this.code){e.next=8;break}return n=window.location.href,window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?\n\t\t\t\t\t\tappid=".concat(d.weixinAppId,"&&\n\t\t\t\t\t\tredirect_uri=").concat(n,"&\n\t\t\t\t\t\tresponse_type=code&\n\t\t\t\t\t\tscope=snsapi_userinfo&\n\t\t\t\t\t\tstate=STATE#wechat_redirect"),e.abrupt("return");case 8:return i=JSON.stringify(["chooseWXPay"]),e.next=11,this.$post("".concat(r.wechatConfig),{url:d.rechargeUrl,jsApiList:i,debug:!0}).then((function(e){c.default.config(p({},e.data))})).catch((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),isWechat:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/micromessenger/i)},select:function(e){this.inputAmount=e.price,this.inputAmountGive=e.give_price}}};t.default=f},dd8d:function(e,t,n){"use strict";(function(e){var i,o=n("4ea4"),a=o(n("bd86"));n("28a5"),n("4917"),n("a481");var r=o(n("7618"));!function(o,a){"object"==(0,r.default)(t)&&"object"==(0,r.default)(e)?e.exports=a(o):(i=function(){return a(o)}.call(t,n,t,e),void 0===i||(e.exports=i))}(window,(function(e,t){function n(t,n,i){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(n),(function(e){c(t,e,i)})):d(t,i)}function i(t,n,i){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){i&&i.trigger&&i.trigger(e),c(t,e,n)})):d(t,i||n)}function o(e){return(e=e||{}).appId=A.appId,e.verifyAppId=A.appId,e.verifySignType="sha1",e.verifyTimestamp=A.timestamp+"",e.verifyNonceStr=A.nonceStr,e.verifySignature=A.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function c(e,t,n){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var i=t.errMsg;i||(i=t.err_msg,delete t.err_msg,i=function(e,t){var n=e,i=m[n];i&&(n=i);var o="ok";if(t){var a=t.indexOf(":");"confirm"==(o=t.substring(a+1))&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),"access denied"!=(o=(o=o.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=o||(o="permission denied"),"config"==n&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return n+":"+o}(e,i),t.errMsg=i),(n=n||{})._complete&&(n._complete(t),delete n._complete),i=t.errMsg||"",A.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var o=i.indexOf(":");switch(i.substring(o+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function s(e){if(e){for(var t=0,n=e.length;t<n;++t){var i=e[t],o=f[i];o&&(e[t]=o)}return e}}function d(e,t){if(!(!A.debug||t&&t.isInnerInvoke)){var n=m[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function u(){return(new Date).getTime()}function l(t){k&&(e.WeixinJSBridge?t():v.addEventListener&&v.addEventListener("WeixinJSBridgeReady",t,!1))}if(!e.jWeixin){var p,f={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},m=function(){var e={};for(var t in f)e[f[t]]=t;return e}(),v=e.document,h=v.title,g=navigator.userAgent.toLowerCase(),y=navigator.platform.toLowerCase(),b=!(!y.match("mac")&&!y.match("win")),w=-1!=g.indexOf("wxdebugger"),k=-1!=g.indexOf("micromessenger"),x=-1!=g.indexOf("android"),_=-1!=g.indexOf("iphone")||-1!=g.indexOf("ipad"),I=(R=g.match(/micromessenger\/(\d+\.\d+\.\d+)/)||g.match(/micromessenger\/(\d+\.\d+)/))?R[1]:"",C={initStartTime:u(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},S={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:_?1:x?2:-1,clientVersion:I,url:encodeURIComponent(location.href)},A={},L={_completes:[]},T={state:0,data:{}};l((function(){C.initEndTime=u()}));var P=!1,M=[],O=(p={config:function(t){d("config",A=t);var i=!1!==A.check;l((function(){if(i)n(f.config,{verifyJsApiList:s(A.jsApiList)},function(){L._complete=function(e){C.preVerifyEndTime=u(),T.state=1,T.data=e},L.success=function(e){S.isPreVerifyOk=0},L.fail=function(e){L._fail?L._fail(e):T.state=-1};var e=L._completes;return e.push((function(){!function(e){if(!(b||w||A.debug||I<"6.0.2"||S.systemType<0)){var t=new Image;S.appId=A.appId,S.initTime=C.initEndTime-C.initStartTime,S.preVerifyTime=C.preVerifyEndTime-C.preVerifyStartTime,O.getNetworkType({isInnerInvoke:!0,success:function(e){S.networkType=e.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+S.version+"&o="+S.isPreVerifyOk+"&s="+S.systemType+"&c="+S.clientVersion+"&a="+S.appId+"&n="+S.networkType+"&i="+S.initTime+"&p="+S.preVerifyTime+"&u="+S.url;t.src=n}})}}()})),L.complete=function(t){for(var n=0,i=e.length;n<i;++n)e[n]();L._completes=[]},L}()),C.preVerifyStartTime=u();else{T.state=1;for(var e=L._completes,t=0,o=e.length;t<o;++t)e[t]();L._completes=[]}})),O.invoke||(O.invoke=function(t,n,i){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(n),i)},O.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})},ready:function(e){0!=T.state?e():(L._completes.push(e),!k&&A.debug&&e())},error:function(e){I<"6.0.2"||(-1==T.state?e(T.data):L._fail=e)},checkJsApi:function(e){n("checkJsApi",{jsApiList:s(e.jsApiList)},(e._complete=function(e){if(x){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var n in t){var i=m[n];i&&(t[i]=t[n],delete t[n])}return e}(e)},e))},onMenuShareTimeline:function(e){i(f.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||h,desc:e.title||h,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){i(f.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?n("sendAppMessage",{title:e.title||h,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):n("sendAppMessage",{title:e.title||h,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){i(f.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){i(f.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){i(f.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){n("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){n("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){i("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){i("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(x){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){n(f.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===P?(P=!0,n("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(P=!1,0<M.length){var t=M.shift();wx.getLocalImgData(t)}},e))):M.push(e)},getNetworkType:function(e){n("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var i=t.indexOf(":"),o=t.substring(i+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},(0,a.default)(p,"getLocation",(function(e){n(f.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))})),(0,a.default)(p,"hideOptionMenu",(function(e){n("hideOptionMenu",{},e)})),(0,a.default)(p,"showOptionMenu",(function(e){n("showOptionMenu",{},e)})),(0,a.default)(p,"closeWindow",(function(e){n("closeWindow",{},e=e||{})})),(0,a.default)(p,"hideMenuItems",(function(e){n("hideMenuItems",{menuList:e.menuList},e)})),(0,a.default)(p,"showMenuItems",(function(e){n("showMenuItems",{menuList:e.menuList},e)})),(0,a.default)(p,"hideAllNonBaseMenuItem",(function(e){n("hideAllNonBaseMenuItem",{},e)})),(0,a.default)(p,"showAllNonBaseMenuItem",(function(e){n("showAllNonBaseMenuItem",{},e)})),(0,a.default)(p,"scanQRCode",(function(e){n("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(_){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e))})),(0,a.default)(p,"openAddress",(function(e){n(f.openAddress,{},(e._complete=function(e){var t;(t=e).postalCode=t.addressPostalCode,delete t.addressPostalCode,t.provinceName=t.proviceFirstStageName,delete t.proviceFirstStageName,t.cityName=t.addressCitySecondStageName,delete t.addressCitySecondStageName,t.countryName=t.addressCountiesThirdStageName,delete t.addressCountiesThirdStageName,t.detailInfo=t.addressDetailInfo,delete t.addressDetailInfo,e=t},e))})),(0,a.default)(p,"openProductSpecificView",(function(e){n(f.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)})),(0,a.default)(p,"addCard",(function(e){for(var t=e.cardList,i=[],o=0,a=t.length;o<a;++o){var r=t[o],c={card_id:r.cardId,card_ext:r.cardExt};i.push(c)}n(f.addCard,{card_list:i},(e._complete=function(e){var t=e.card_list;if(t){for(var n=0,i=(t=JSON.parse(t)).length;n<i;++n){var o=t[n];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},e))})),(0,a.default)(p,"chooseCard",(function(e){n("chooseCard",{app_id:A.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))})),(0,a.default)(p,"openCard",(function(e){for(var t=e.cardList,i=[],o=0,a=t.length;o<a;++o){var r=t[o],c={card_id:r.cardId,code:r.code};i.push(c)}n(f.openCard,{card_list:i},e)})),(0,a.default)(p,"consumeAndShareCard",(function(e){n(f.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)})),(0,a.default)(p,"chooseWXPay",(function(e){n(f.chooseWXPay,r(e),e)})),(0,a.default)(p,"openEnterpriseRedPacket",(function(e){n(f.openEnterpriseRedPacket,r(e),e)})),(0,a.default)(p,"startSearchBeacons",(function(e){n(f.startSearchBeacons,{ticket:e.ticket},e)})),(0,a.default)(p,"stopSearchBeacons",(function(e){n(f.stopSearchBeacons,{},e)})),(0,a.default)(p,"onSearchBeacons",(function(e){i(f.onSearchBeacons,e)})),(0,a.default)(p,"openEnterpriseChat",(function(e){n("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)})),(0,a.default)(p,"launchMiniProgram",(function(e){n("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}}(e.path),envVersion:e.envVersion},e)})),(0,a.default)(p,"miniProgram",{navigateBack:function(e){e=e||{},l((function(){n("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){l((function(){n("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){l((function(){n("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){l((function(){n("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){l((function(){n("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){l((function(){n("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){l((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}),p),D=1,j={};return v.addEventListener("error",(function(e){if(!x){var t=e.target,n=t.tagName,i=t.src;if(("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n)&&-1!=i.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var o=t["wx-id"];if(o||(o=D++,t["wx-id"]=o),j[o])return;j[o]=!0,wx.ready((function(){wx.getLocalImgData({localId:i,success:function(e){t.src=e.localData}})}))}}}),!0),v.addEventListener("load",(function(e){if(!x){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var i=t["wx-id"];i&&(j[i]=!1)}}}),!0),t&&(e.wx=e.jWeixin=O),O}var R}))}).call(this,n("62e4")(e))}}]);
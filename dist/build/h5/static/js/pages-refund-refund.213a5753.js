(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-refund-refund"],{"187c":function(e,t,r){"use strict";r.r(t);var n=r("92b8"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"4fac":function(e,t,r){"use strict";var n=r("69bd"),a=r.n(n);a.a},"69bd":function(e,t,r){var n=r("d43e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("5116f2fa",n,!0,{sourceMap:!1,shadowMode:!1})},"704a":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"refund"},[r("v-uni-view",{staticClass:"product-info"},[r("v-uni-image",{staticClass:"product-image",attrs:{mode:"aspectFill",src:e.productInfo.product_picture}}),r("v-uni-view",{staticClass:"product-content"},[r("v-uni-text",{staticClass:"product-name in2line"},[e._v(e._s(e.productInfo.product_name))]),r("v-uni-text",{staticClass:"product-sku-name"},[e._v(e._s(e.productInfo.skuName||"基础款"))]),r("v-uni-text",{staticClass:"product-price"},[e._v(e._s(e.productInfo.product_money)+" * "+e._s(e.productInfo.num))])],1)],1),r("v-uni-view",{staticClass:"product-textarea"},[r("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.handleOrderRefundApply(t)}}},[2===parseInt(e.refundType,10)?r("v-uni-radio-group",{staticClass:"refund-type",attrs:{name:"refund_type"},on:{change:function(t){t=e.$handleEvent(t),e.handleRefundTypeChange(t)}}},e._l(e.refundTypeArr,(function(t,n){return r("v-uni-label",{key:n,staticClass:"gender-item"},[r("v-uni-radio",{staticClass:"gender-item-radio",attrs:{value:t.value,color:"#fa436a",checked:e.refund_type==t.value}}),r("v-uni-text",{staticClass:"gender-item-text"},[e._v(e._s(t.name))])],1)})),1):e._e(),r("v-uni-textarea",{staticClass:"textarea",attrs:{name:"refund_reason",maxlength:"140",value:e.refund_reason,"placeholder-style":"color:#ccc; font-size: 24upx",placeholder:"宝贝不满足你的期待吗？请填写一下你的退货/退款理由吧"},on:{input:function(t){t=e.$handleEvent(t),e.handleContentChange(t)}}}),r("v-uni-view",{staticClass:"tips"},[r("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.refund_reason.length>0&&e.refund_reason.length<40,expression:"refund_reason.length > 0 && refund_reason.length < 40"}]},[e._v("您已输入"),r("v-uni-text",{staticClass:"f"},[e._v(e._s(e.refund_reason.length))]),e._v("字")],1),r("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.refund_reason.length>=40,expression:"refund_reason.length >= 40"}]},[e._v("还可输入"),r("v-uni-text",{staticClass:"s"},[e._v(e._s(e.wordLimit))]),e._v("字")],1)],1),r("v-uni-button",{staticClass:"confirm-btn",attrs:{formType:"submit"}},[e._v(e._s(1===parseInt(e.refund_type,10)?"仅退款":"退货退款"))])],1)],1)],1)},a=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}))},"92b8":function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("8e6e"),r("ac6a"),r("456d");var a=n(r("bd86"));r("96cf");var o=n(r("3b8d")),i=n(r("f96a")),u=r("802d"),s=n(r("2ba4"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=r("9564"),l={components:{uniRate:i.default,uniIcons:s.default},data:function(){return{productInfo:{},refundType:1,refund_type:1,refund_reason:"",refundTypeArr:[{value:"1",name:"仅退款"},{value:"2",name:"退货退款"}]}},computed:{wordLimit:function(){return 140-this.refund_reason.length}},onLoad:function(e){this.initData(e)},methods:{initData:function(e){this.token=uni.getStorageSync("accessToken")||void 0,this.productInfo=JSON.parse(e.data),this.refundType=e.refundType;var t="仅退款";t=1===parseInt(this.refundType,10)?"仅退款":"仅退款/退货退款",uni.setNavigationBarTitle({title:t})},handleContentChange:function(e){this.refund_reason=e.detail.value},handleRefundTypeChange:function(e){this.refund_type=e.detail.value},handleOrderRefundApply:function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.detail.value,1===parseInt(this.refundType,10)&&(r.refund_type=this.refundType),n=[{name:"refund_reason",checkType:"notnull",checkRule:"",errorMsg:"请输入退款/退货理由"}],a=d.check(r,n),a){e.next=7;break}return uni.showToast({title:d.error,icon:"none"}),e.abrupt("return");case 7:return uni.showLoading({title:"加载中..."}),e.next=10,this.$post("".concat(u.orderRefundApply),f({id:this.productInfo.id},r)).then((function(e){200===e.code?(uni.showToast({title:"退款成功",icon:"none"}),uni.navigateBack({delta:2})):uni.showToast({title:e.message,icon:"none"})})).catch((function(e){console.log(e)}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}};t.default=l},9564:function(e,t,r){"use strict";r("c5f6"),r("28a5"),r("3b2b"),e.exports={error:"",check:function(e,t){for(var r=0;r<t.length;r++){if(!t[r].checkType)return!0;if(!t[r].name)return!0;if(!t[r].errorMsg)return!0;if(!e[t[r].name])return this.error=t[r].errorMsg,!1;switch(t[r].checkType){case"string":var n=new RegExp("^.{"+t[r].checkRule+"}$");if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"int":n=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[r].checkRule+"}$");if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"between":if(!this.isNumber(e[t[r].name]))return this.error=t[r].errorMsg,!1;var a=t[r].checkRule.split(",");if(a[0]=Number(a[0]),a[1]=Number(a[1]),e[t[r].name]>a[1]||e[t[r].name]<a[0])return this.error=t[r].errorMsg,!1;break;case"betweenD":n=/^-?[1-9][0-9]?$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;a=t[r].checkRule.split(",");if(a[0]=Number(a[0]),a[1]=Number(a[1]),e[t[r].name]>a[1]||e[t[r].name]<a[0])return this.error=t[r].errorMsg,!1;break;case"betweenF":n=/^-?[0-9][0-9]?.+[0-9]+$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;a=t[r].checkRule.split(",");if(a[0]=Number(a[0]),a[1]=Number(a[1]),e[t[r].name]>a[1]||e[t[r].name]<a[0])return this.error=t[r].errorMsg,!1;break;case"same":if(e[t[r].name]!=t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"notsame":if(e[t[r].name]==t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"email":n=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"phoneno":n=/^1[0-9]{10,10}$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"zipcode":n=/^[0-9]{6}$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"reg":n=new RegExp(t[r].checkRule);if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"in":if(-1==t[r].checkRule.indexOf(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"notnull":if(null==e[t[r].name]||e[t[r].name].length<1)return this.error=t[r].errorMsg,!1;break}}return!0},isNumber:function(e){var t=/^-?[1-9][0-9]?.?[0-9]*$/;return t.test(e)}}},d43e:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".refund[data-v-2c9e83fe]{background:#fff;padding:%?20?%}.refund .product-info[data-v-2c9e83fe]{display:-webkit-box;display:-webkit-flex;display:flex}.refund .product-info .product-image[data-v-2c9e83fe]{width:%?200?%;height:%?150?%}.refund .product-info .product-content[data-v-2c9e83fe]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?20?%}.refund .product-info .product-content .product-name[data-v-2c9e83fe]{font-size:%?32?%;color:#303133;line-height:%?32?%;min-height:%?60?%}.refund .product-info .product-content .product-sku-name[data-v-2c9e83fe]{display:block;font-size:%?28?%;color:#303133}.refund .product-textarea[data-v-2c9e83fe]{margin-top:%?20?%;height:%?300?%;border-bottom:1px solid rgba(0,0,0,.1);position:relative}.refund .product-textarea .refund-type[data-v-2c9e83fe]{margin:%?20?% 0}.refund .product-textarea .textarea[data-v-2c9e83fe]{width:100%}.refund .product-textarea .tips[data-v-2c9e83fe]{position:absolute;bottom:%?10?%;right:0;font-size:%?24?%;color:#909399}.refund .product-textarea .tips .f[data-v-2c9e83fe]{color:#4cd964}.refund .product-textarea .tips .s[data-v-2c9e83fe]{color:#fa436a}.refund .product-textarea .anonymous[data-v-2c9e83fe]{color:#909399;font-size:%?24?%;position:absolute;bottom:0;left:0}.refund .confirm-btn[data-v-2c9e83fe]{width:%?630?%;height:%?76?%;line-height:%?76?%;border-radius:50px;margin-top:%?50?%;background:#fa436a;color:#fff;font-size:%?32?%}.refund .confirm-btn[data-v-2c9e83fe]:after{border-radius:100px}",""]),e.exports=t},ec2a:function(e,t,r){"use strict";r.r(t);var n=r("704a"),a=r("187c");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("4fac");var i=r("2877"),u=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,"2c9e83fe",null);t["default"]=u.exports}}]);
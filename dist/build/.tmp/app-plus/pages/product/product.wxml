<view class="product data-v-2ca02ec2"><view class="carousel data-v-2ca02ec2"><swiper indicator-dots circular="true" duration="400" class="data-v-2ca02ec2"><block wx:for="{{productDetail.covers}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="swiper-item data-v-2ca02ec2"><view class="image-wrapper data-v-2ca02ec2"><rf-image class="loaded data-v-2ca02ec2" vue-id="{{'1-'+index}}" src="{{item}}" mode="aspectFill" bind:__l="__l"></rf-image></view></swiper-item></block></swiper></view><view class="introduce-section data-v-2ca02ec2"><text class="title data-v-2ca02ec2">{{productDetail.name||' 暂无商品详情'+(!!errorInfo?'['+errorInfo+']':'')}}</text><text class="sketch data-v-2ca02ec2">{{productDetail.sketch}}</text><block wx:if="{{productDetail.point_exchange_type==4}}"><view class="price-box point-box data-v-2ca02ec2">该商品仅需<text class="price data-v-2ca02ec2">{{productDetail.point_exchange+" 积分"}}</text></view></block><block wx:else><view class="price-box data-v-2ca02ec2"><text class="price-tip data-v-2ca02ec2">¥</text><text class="price data-v-2ca02ec2">{{currentSkuPrice||productDetail.price}}</text><block wx:if="{{$root.m0>$root.m1}}"><text class="m-price data-v-2ca02ec2">{{productDetail.market_price}}</text></block><block wx:if="{{$root.m2>$root.m3}}"><text class="coupon-tip data-v-2ca02ec2">{{$root.f0+"折"}}</text></block></view></block><view class="bot-row data-v-2ca02ec2"><text class="data-v-2ca02ec2">{{"销量: "+(productDetail.sales||0)}}</text><text class="data-v-2ca02ec2">{{"收藏量: "+(productDetail.collect_num||0)}}</text><text class="data-v-2ca02ec2">{{"浏览量: "+(productDetail.view||0)}}</text></view><view class="bot-row data-v-2ca02ec2"><text class="data-v-2ca02ec2">{{"评分: "+(productDetail.match_point||0)}}</text><text class="data-v-2ca02ec2">{{"评价量: "+(productDetail.comment_num||0)}}</text><text class="data-v-2ca02ec2">{{"分享量: "+(productDetail.transmit_num||0)}}</text></view></view><view class="share-section data-v-2ca02ec2"><view class="share-icon data-v-2ca02ec2"><text class="iconfont iconxingxing data-v-2ca02ec2"></text>返</view><text class="tit data-v-2ca02ec2" open-type="contact">分享该商品给你的朋友们</text><view class="iconfont iconbangzhu1 _i data-v-2ca02ec2"></view><button class="share-btn data-v-2ca02ec2" disabled="{{!!productDetail}}" open-type="share">立即分享<view class="iconfont iconyou _i data-v-2ca02ec2"></view></button></view><view class="c-list data-v-2ca02ec2"><block wx:if="{{productDetail.stock&&productDetail.is_stock_visible==1}}"><view class="c-row b-b data-v-2ca02ec2"><text class="tit data-v-2ca02ec2">商品库存</text><block wx:if="{{productDetail.stock>0}}"><view class="con-list data-v-2ca02ec2">{{''+productDetail.stock+' 个'}}</view></block><block wx:else><view class="con-list red data-v-2ca02ec2">库存不足</view></block></view></block><block wx:if="{{productDetail.address_name}}"><view class="c-row b-b data-v-2ca02ec2"><text class="tit data-v-2ca02ec2">发货地址</text><view class="con-list data-v-2ca02ec2">{{''+productDetail.address_name+''}}</view></view></block><view data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="c-row b-b data-v-2ca02ec2" bindtap="__e"><text class="tit data-v-2ca02ec2">购买类型</text><view class="con data-v-2ca02ec2"><block wx:for="{{specSelected}}" wx:for-item="sItem" wx:for-index="sIndex" wx:key="sIndex"><text class="selected-text data-v-2ca02ec2">{{''+sItem.title+''}}</text></block><block wx:if="{{specSelected.length>0}}"><text class="data-v-2ca02ec2">{{'* '+cartCount}}</text></block><block wx:if="{{productDetail.base_attribute_format&&productDetail.base_attribute_format.length===0}}"><text class="selected-text data-v-2ca02ec2">{{'基础款 * '+cartCount+''}}</text></block><block wx:if="{{specSelected.length===0}}"><text class="selected-text data-v-2ca02ec2">暂无购买类型</text></block></view><block wx:if="{{!productDetail}}"><view class="iconfont iconyou _i data-v-2ca02ec2"></view></block></view><view class="c-row b-b data-v-2ca02ec2"><text class="tit data-v-2ca02ec2">优惠券</text><text data-event-opts="{{[['tap',[['toggleMask',['show']]]]]}}" class="con t-r red data-v-2ca02ec2" bindtap="__e">领取优惠券</text><block wx:if="{{!productDetail}}"><view class="iconfont iconyou _i data-v-2ca02ec2"></view></block></view><view class="c-row b-b data-v-2ca02ec2"><text class="tit data-v-2ca02ec2">限购说明</text><view class="con-list data-v-2ca02ec2"><block wx:if="{{productDetail.point_exchange_type}}"><text class="data-v-2ca02ec2">{{$root.f1}}</text></block><block wx:else><text class="data-v-2ca02ec2">暂无限购说明</text></block></view></view><view class="c-row b-b data-v-2ca02ec2"><text class="tit data-v-2ca02ec2">积分活动</text><block wx:if="{{productDetail.point_exchange_type}}"><view class="con-list data-v-2ca02ec2"><block wx:if="{{productDetail.point_exchange_type}}"><text class="data-v-2ca02ec2">{{"积分兑换类型: "+$root.f2+''}}</text></block><text class="data-v-2ca02ec2">{{"积分赠送类型: "+$root.f3+''}}</text><text class="data-v-2ca02ec2">{{"最少可获得: "+$root.f4+''}}</text><block wx:if="{{productDetail.point_exchange!=0}}"><text class="data-v-2ca02ec2">{{"兑换所需积分: "+productDetail.point_exchange+''}}</text></block><block wx:if="{{productDetail.max_use_point!=0}}"><text class="data-v-2ca02ec2">{{"最大可使用积分: "+productDetail.max_use_point+''}}</text></block><block wx:if="{{productDetail.point_exchange_type==3}}"><text data-event-opts="{{[['tap',[['addCart',['buy']]]]]}}" class="buy-now data-v-2ca02ec2" bindtap="__e">积分兑换 >></text></block></view></block><block wx:else><view class="con-list data-v-2ca02ec2">暂无积分活动</view></block></view><view data-event-opts="{{[['tap',[['showService',['$event']]]]]}}" class="c-row b-b data-v-2ca02ec2" bindtap="__e"><text class="tit data-v-2ca02ec2">服务</text><block wx:if="{{productDetail.tags&&productDetail.tags.length>=1}}"><view class="con-list data-v-2ca02ec2"><text class="data-v-2ca02ec2">{{productDetail.tags[0]+'...'}}</text></view></block><block wx:else><view class="con-list data-v-2ca02ec2">暂无服务</view></block><block wx:if="{{productDetail.tags&&productDetail.tags.length>=1}}"><view class="iconfont iconyou _i data-v-2ca02ec2"></view></block></view><view data-event-opts="{{[['tap',[['showLadderPreferential',['$event']]]]]}}" class="c-row b-b data-v-2ca02ec2" bindtap="__e"><text class="tit data-v-2ca02ec2">阶梯优惠</text><block wx:if="{{productDetail.ladderPreferential&&productDetail.ladderPreferential.length>0}}"><view class="con-list data-v-2ca02ec2"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text class="data-v-2ca02ec2">{{'满'+item.$orig.quantity+'件'}}<block wx:if="{{item.m4===1}}"><text class="data-v-2ca02ec2">{{"每件减"+item.$orig.price+"元"}}</text></block><block wx:if="{{item.m5===2}}"><text class="data-v-2ca02ec2">{{"每件"+item.m6+"折"}}</text></block></text></block></view></block><block wx:else><view class="con-list data-v-2ca02ec2">暂无阶梯优惠</view></block><block wx:if="{{productDetail.ladderPreferential&&productDetail.ladderPreferential.length>=1}}"><view class="iconfont iconyou _i data-v-2ca02ec2"></view></block></view><block wx:if="{{productDetail.attributeValue}}"><view data-event-opts="{{[['tap',[['showAttributeValue',['$event']]]]]}}" class="c-row b-b data-v-2ca02ec2" bindtap="__e"><text class="tit data-v-2ca02ec2">参数</text><block wx:if="{{productDetail.attributeValue&&productDetail.attributeValue.length>=1}}"><view class="con-list data-v-2ca02ec2"><text class="data-v-2ca02ec2">{{''+((productDetail.attributeValue&&productDetail.attributeValue[0].title)+': '+(productDetail.attributeValue&&productDetail.attributeValue[0].value))+' ...'}}</text></view></block><block wx:else><view class="con-list data-v-2ca02ec2">暂无商品基本信息</view></block><block wx:if="{{productDetail.attributeValue&&productDetail.attributeValue.length>=1}}"><view class="iconfont iconyou _i data-v-2ca02ec2"></view></block></view></block></view><view data-event-opts="{{[['tap',[['toEvaluateList',['$event']]]]]}}" class="eva-section data-v-2ca02ec2" bindtap="__e"><view class="e-header data-v-2ca02ec2"><text class="tit data-v-2ca02ec2">评价</text><text class="data-v-2ca02ec2">{{"("+(productDetail.comment_num||0)+")"}}</text><block wx:if="{{productDetail.match_ratio}}"><text class="tip data-v-2ca02ec2">{{"好评率 "+productDetail.match_ratio+"%"}}</text></block><block wx:else><text class="tip data-v-2ca02ec2">暂无评价信息</text></block><view class="iconfont iconyou _i data-v-2ca02ec2"></view></view><block wx:if="{{productDetail.evaluate&&productDetail.evaluate.length>0}}"><view class="eva-box data-v-2ca02ec2"><image class="portrait data-v-2ca02ec2" src="{{productDetail.evaluate&&productDetail.evaluate[0]&&productDetail.evaluate[0].member_head_portrait||'/static/missing-face.png'}}" mode="aspectFill"></image><view class="right data-v-2ca02ec2"><view class="name data-v-2ca02ec2"><text class="data-v-2ca02ec2">{{''+(productDetail.evaluate&&productDetail.evaluate[0]&&productDetail.evaluate[0].member_nickname||'匿名用户')+''}}</text><block wx:if="{{evaluateList.length>0}}"><rf-rate vue-id="2" size="16" disabled="true" value="{{evaluateList[0].scores}}" active-color="#fa436a" class="data-v-2ca02ec2" bind:__l="__l"></rf-rate></block></view><text class="con in2line data-v-2ca02ec2">{{productDetail.evaluate&&productDetail.evaluate[0]&&productDetail.evaluate[0].content||'这个人很懒，什么都没留下~'}}</text><view class="bot data-v-2ca02ec2"><text class="attr data-v-2ca02ec2">{{"购买类型："+(productDetail.evaluate&&productDetail.evaluate[0]&&productDetail.evaluate[0].sku_name||'基础版')}}</text><text class="time data-v-2ca02ec2">{{$root.f5}}</text></view></view></view></block></view><view class="detail-desc data-v-2ca02ec2"><view class="d-header data-v-2ca02ec2"><text class="data-v-2ca02ec2">商品详情</text></view><rich-text nodes="{{$root.f6}}" class="data-v-2ca02ec2"></rich-text></view><view class="page-bottom data-v-2ca02ec2"><navigator class="p-b-btn data-v-2ca02ec2" url="/pages/index/index" open-type="switchTab"><view class="iconfont iconxiatubiao--copy _i data-v-2ca02ec2"></view><text class="data-v-2ca02ec2">首页</text></navigator><navigator class="p-b-btn cart data-v-2ca02ec2" url="/pages/cart/cart" open-type="switchTab"><view class="iconfont icongouwuche _i data-v-2ca02ec2"></view><text class="data-v-2ca02ec2">购物车</text><block wx:if="{{cartNum&&cartNum>0}}"><rf-badge class="badge data-v-2ca02ec2" vue-id="3" type="error" size="small" text="{{cartNum}}" bind:__l="__l"></rf-badge></block></navigator><view data-event-opts="{{[['tap',[['toFavorite',['$event']]]]]}}" class="{{['p-b-btn data-v-2ca02ec2',(favorite)?'active':'']}}" bindtap="__e"><view class="iconfont iconshoucang _i data-v-2ca02ec2"></view><text class="data-v-2ca02ec2">收藏</text></view><view class="action-btn-group data-v-2ca02ec2"><button class="action-btn no-border buy-now-btn data-v-2ca02ec2" type="primary" disabled="{{(currentStock||productDetail.stock)==0}}" data-event-opts="{{[['tap',[['addCart',['buy']]]]]}}" bindtap="__e">立即购买</button><button class=" action-btn no-border add-cart-btn data-v-2ca02ec2" type="primary" disabled="{{productDetail.point_exchange_type==2||productDetail.point_exchange_type==4||(currentStock||productDetail.stock)==0}}" data-event-opts="{{[['tap',[['addCart',['cart']]]]]}}" bindtap="__e">加入购物车</button></view></view><view data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="{{['popup service data-v-2ca02ec2',serviceClass]}}" bindtap="__e"><view class="mask data-v-2ca02ec2"></view><view class="layer layer-service data-v-2ca02ec2"><view class="content data-v-2ca02ec2"><block wx:for="{{productDetail.tags}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="row data-v-2ca02ec2"><view class="title data-v-2ca02ec2">{{item}}</view><view class="description data-v-2ca02ec2">{{"此商品承诺"+item}}</view></view></block></view><button data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="btn data-v-2ca02ec2" bindtap="__e">完成</button></view></view><view data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="{{['popup service data-v-2ca02ec2',ladderPreferentialClass]}}" bindtap="__e"><view class="mask data-v-2ca02ec2"></view><view class="layer layer-service data-v-2ca02ec2"><view class="content data-v-2ca02ec2"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="row data-v-2ca02ec2"><view class="title data-v-2ca02ec2">{{"满"+item.$orig.quantity+'件'}}<block wx:if="{{item.m7===1}}"><text class="data-v-2ca02ec2">{{"每件减"+item.$orig.price+"元"}}</text></block><block wx:if="{{item.m8===2}}"><text class="data-v-2ca02ec2">{{"每件"+item.m9+"折"}}</text></block></view></view></block></view><button data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="btn data-v-2ca02ec2" bindtap="__e">完成</button></view></view><view data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="{{['popup service data-v-2ca02ec2',attributeValueClass]}}" bindtap="__e"><view class="mask data-v-2ca02ec2"></view><view class="layer layer-service data-v-2ca02ec2"><view class="content data-v-2ca02ec2"><block wx:for="{{productDetail.attributeValue}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="row data-v-2ca02ec2"><view class="title data-v-2ca02ec2">{{''+(item.title+': '+item.value)+''}}</view></view></block></view><button data-event-opts="{{[['tap',[['hideService',['$event']]]]]}}" class="btn data-v-2ca02ec2" bindtap="__e">完成</button></view></view><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['toggleSpec',['$event']]]]]}}" class="{{['popup spec data-v-2ca02ec2',specClass]}}" catchtouchmove="__e" bindtap="__e"><view data-event-opts="{{[['tap',[['hideSpec',['$event']]]]]}}" class="mask data-v-2ca02ec2" bindtap="__e"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer attr-content data-v-2ca02ec2" catchtap="__e"><view class="a-t data-v-2ca02ec2"><image src="{{showTypeImage||productDetail.picture}}" class="data-v-2ca02ec2"></image><view class="right data-v-2ca02ec2"><text class="title data-v-2ca02ec2">{{productDetail.name}}</text><text class="price data-v-2ca02ec2">{{"¥"+(currentSkuPrice||productDetail.minSkuPrice)}}</text><text class="stock data-v-2ca02ec2">{{"库存："+(currentStock||productDetail.stock)+"件"}}</text><block wx:if="{{specSelected.length>0}}"><view class="selected data-v-2ca02ec2">已选：<block wx:for="{{specSelected}}" wx:for-item="sItem" wx:for-index="sIndex" wx:key="sIndex"><text class="selected-text data-v-2ca02ec2">{{''+sItem.title+''}}</text></block><block wx:if="{{specSelected.length>0}}"><text class="data-v-2ca02ec2">{{'* '+cartCount+''}}</text></block></view></block></view></view><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="attr-list data-v-2ca02ec2"><text class="data-v-2ca02ec2">{{item.$orig.title}}</text><view class="item-list data-v-2ca02ec2"><block wx:for="{{specChildList}}" wx:for-item="childItem" wx:for-index="childIndex" wx:key="childIndex"><block wx:if="{{childItem.base_spec_id===item.$orig.base_spec_id}}"><view data-event-opts="{{[['tap',[['selectSpec',[childIndex,'$0','$1'],[[['specChildList','',childIndex,'base_spec_id']],[['specList','',index,'show_type']]]]]]]}}" class="{{['tit data-v-2ca02ec2',(childItem.selected)?'selected':'']}}" style="{{(childItem.selected&&item.m10===2?styleObject:'')}}" bindtap="__e"><block wx:if="{{item.m11===1}}"><text class="data-v-2ca02ec2">{{''+childItem.title+''}}</text></block><block wx:if="{{item.m12===2}}"><text class="data-v-2ca02ec2">{{''+childItem.title+''}}</text></block><block wx:if="{{item.m13===3}}"><view class="data-v-2ca02ec2"><image class="img data-v-2ca02ec2" src="{{childItem.data||productDetail.picture}}" mode="aspectFill"></image>{{''+childItem.title+''}}</view></block></view></block></block></view></view></block><view class="select-count data-v-2ca02ec2"><text class="data-v-2ca02ec2">购买数量</text><uni-number-box class="step data-v-2ca02ec2" vue-id="4" min="{{1}}" max="{{$root.m14}}" value="{{cartCount}}" data-event-opts="{{[['^eventChange',[['numberChange']]]]}}" bind:eventChange="__e" bind:__l="__l"></uni-number-box></view><button data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="btn data-v-2ca02ec2" bindtap="__e">完成</button></view></view><share vue-id="5" contentHeight="{{580}}" shareList="{{shareList}}" data-ref="share" class="data-v-2ca02ec2 vue-ref" bind:__l="__l"></share><view data-event-opts="{{[['tap',[['toggleMask',['$event']]]]]}}" class="{{['mask data-v-2ca02ec2',maskState===0?'none':maskState===1?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="mask-content data-v-2ca02ec2" catchtap="__e"><block wx:for="{{$root.l3}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['getCoupon',['$0'],[[['productDetail.canReceiveCoupon','',index]]]]]]]}}" class="coupon-item data-v-2ca02ec2" bindtap="__e"><view class="con data-v-2ca02ec2"><view class="left data-v-2ca02ec2"><text class="title data-v-2ca02ec2">{{item.$orig.title}}</text><block wx:if="{{item.m15===0}}"><text class="time data-v-2ca02ec2">{{item.f7+" ~ "+item.f8}}</text></block><block wx:else><text class="time data-v-2ca02ec2">{{"自领取之日 "+item.$orig.fixed_term+"天内有效"}}</text></block></view><view class="right data-v-2ca02ec2"><block wx:if="{{item.$orig.money}}"><text class="price data-v-2ca02ec2">{{item.$orig.money}}</text></block><block wx:else><text class="price-discount data-v-2ca02ec2">{{item.$orig.discount+'折'}}</text></block><text class="data-v-2ca02ec2">{{"满"+item.$orig.at_least+"可用"}}</text></view><view class="circle l data-v-2ca02ec2"></view><view class="circle r data-v-2ca02ec2"></view></view><view class="tips data-v-2ca02ec2"><block wx:if="{{item.$orig.range_type}}"><text class="data-v-2ca02ec2">{{''+(item.m16===2?'部分产品使用':'全场产品使用')+''}}</text></block></view></view></block></view></view><block wx:if="{{loading}}"><rf-loading vue-id="6" class="data-v-2ca02ec2" bind:__l="__l"></rf-loading></block></view>
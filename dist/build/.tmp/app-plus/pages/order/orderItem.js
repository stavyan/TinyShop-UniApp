(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/orderItem"],{4371:function(e,t,n){"use strict";n.r(t);var a=n("72f0"),r=n("c573");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("dd52");var u=n("2877"),i=Object(u["a"])(r["default"],a["a"],a["b"],!1,null,null,null);t["default"]=i.exports},"50d0":function(e,t,n){"use strict";(function(e){n("6cdc"),n("921b");a(n("66fd"));var t=a(n("4371"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"72f0":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.orderItemList,(function(t,n){var a=e.itemOptions(t.is_evaluate,t.refund_status),r=e._f("filterProductStatus")(t),o=e._f("time")(t.created_at);return{$orig:e.__get_orig(t),m0:a,f0:r,f1:o}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},a88c:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("a34a")),o=s(n("c7c7")),u=n("802d"),i=s(n("c1df"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,r,o,u){try{var i=e[o](u),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function u(e){c(o,a,r,u,i,"next",e)}function i(e){c(o,a,r,u,i,"throw",e)}u(void 0)}))}}var d=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"09c2"))},f=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-swipe-action/uni-swipe-action")]).then(n.bind(null,"0cc7"))},p=function(){return n.e("components/uni-tag/uni-tag").then(n.bind(null,"d719"))},v={components:{uniSwipeAction:f,uniLoadMore:d,uniTag:p},data:function(){return{orderItemList:[],errorImg:o.default,page:1,loadingType:"more",token:null,options:[],orderStatus:null}},filters:{time:function(e){return(0,i.default)(1e3*e).format("YYYY-MM-DD HH:mm:ss")},filterIsEvaluate:function(t){console.log(e(t," at pages/order/orderItem.vue:77"));var n=["未评价","已评价","已追评"];return n[parseInt(t,10)]},filterEvaluateType:function(e){var t=["primary","warning","success"];return t[parseInt(e,10)]},filterProductStatus:function(e){var t=null;if(0!==parseInt(e.refund_status,10)){var n=[{key:1,value:"退款申请"},{key:2,value:"等待退货"},{key:3,value:"等待确认收货"},{key:4,value:"等待确认退款"},{key:5,value:"同意退款"},{key:-1,value:"退款已拒绝"},{key:-2,value:"退款已关闭"},{key:-3,value:"退款不通过"}];n.forEach((function(n){n.key==e.refund_status&&(t=n.value)}))}else if(4===parseInt(e.order_status,10)){var a=[{key:0,value:"未评价"},{key:1,value:"已评价"},{key:2,value:"已追评"}];a.forEach((function(n){n.key==e.is_evaluate&&(t=n.value)}))}else{var r=[{key:0,value:"待付款"},{key:1,value:"待发货"},{key:2,value:"已发货"},{key:3,value:"已收货"},{key:4,value:"已完成"},{key:-1,value:"退货申请"},{key:-2,value:"退款中"},{key:-3,value:"退款完成"},{key:-4,value:"已关闭"},{key:-5,value:"撤销申请"}];r.forEach((function(n){n.key==e.order_status&&(t=n.value)}))}return t}},computed:{itemOptions:function(){return function(t,n){var a=[];console.log(e(n," at pages/order/orderItem.vue:140"));var r=this.orderStatus;if(1===parseInt(r,10))switch(n){case"0":a.push({text:"仅退款"});break;case"1":a.push({text:"取消",style:{backgroundColor:"rgb(254,156,1)"}});break;default:break}else if(2===parseInt(r,10))switch(n){case"0":a.push({text:"退款/退货"});break;case"1":a.push({text:"取消",style:{backgroundColor:"rgb(254,156,1)"}});break;default:break}else if(4===parseInt(r,10))switch(t){case"0":a.push({text:"评价",style:{backgroundColor:"rgb(254,156,1)"}});break;case"1":a.push({text:"追加评价",style:{backgroundColor:"rgb(255,58,49)"}});break;case 2:break;default:break}return a}}},onLoad:function(e){this.initData(e)},methods:{bindClick:function(e){if("仅退款"===e.content.text){if(0!==parseInt(e.data.refund_status,10))return void a.showToast({title:"您已经提交了退款申请",icon:"none"});this.goRefund(e.data,1)}else if("退款/退货"===e.content.text){if(0!==parseInt(e.data.refund_status,10))return void a.showToast({title:"您已经提交了退货申请",icon:"none"});this.goRefund(e.data,2)}else"取消退货"===e.content.text||"取消退款"===e.content.text?this.handleCloseOrderRefundApply(e.data.id):"评价"===e.content.text?this.goEvaluation(e.data):"追加评价"===e.content.text&&this.goEvaluation(e.data,"add")},handleCloseOrderRefundApply:function(){var t=l(r.default.mark((function t(n){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.showLoading({title:"加载中..."}),t.next=3,this.$post("".concat(u.closeOrderRefundApply),{id:n}).then((function(e){200===e.code?a.navigateBack({delta:1}):a.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(e(t," at pages/order/orderItem.vue:227"))}));case 3:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}(),initData:function(){var t=l(r.default.mark((function t(n){var o=this;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.token=a.getStorageSync("accessToken")||void 0,t.next=3,this.$get("".concat(u.orderDetail),{id:n.id}).then((function(e){200===e.code?(o.orderItemList=e.data.product,o.orderStatus=e.data.order_status):a.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(e(t," at pages/order/orderItem.vue:242"))}));case 3:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}(),initOptions:function(e){if(1===parseInt(e,10))this.options.push({text:"退款"}),this.options.push({text:"取消退款",style:{backgroundColor:"rgb(254,156,1)"}});else if(2===parseInt(e,10))this.options.push({text:"退货"}),this.options.push({text:"取消退货",style:{backgroundColor:"rgb(254,156,1)"}});else if(3===parseInt(e,10)){var t=[],n=[];this.orderItemList.forEach((function(e){0===parseInt(e.is_evaluate)?t.push({text:"评价",style:{backgroundColor:"rgb(254,156,1)"}}):1===parseInt(e.is_evaluate)&&n.push({text:"追加评价",style:{backgroundColor:"rgb(255,58,49)"}})})),this.options=t||n||[]}},onImageError:function(e){this.orderItemList[e].picture=this.errorImg},goEvaluation:function(e,t){a.navigateTo({url:"/pages/evaluation/evaluation?data=".concat(JSON.stringify(e),"&type=").concat(t)})},goRefund:function(e,t){a.navigateTo({url:"/pages/refund/refund?data=".concat(JSON.stringify(e),"&refundType=").concat(t)})}}};t.default=v}).call(this,n("0de9")["default"],n("6e42")["default"])},c573:function(e,t,n){"use strict";n.r(t);var a=n("a88c"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},dd52:function(e,t,n){"use strict";var a=n("fe04"),r=n.n(a);r.a},fe04:function(e,t,n){}},[["50d0","common/runtime","common/vendor"]]]);
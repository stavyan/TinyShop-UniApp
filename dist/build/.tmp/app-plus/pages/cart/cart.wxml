<view class="cart"><view class="header" style="{{'position:'+(headerPosition)+';'+('top:'+(headerTop)+';')}}"><view class="title">购物车</view></view><view class="place"></view><block wx:if="{{cartList.length===0}}"><view class="empty"><text class="iconfont iconempty"></text><block wx:if="{{token}}"><view class="empty-tips">空空如也<block wx:if="{{token}}"><navigator class="navigator" url="../category/category" open-type="switchTab">随便逛逛></navigator></block></view></block><block wx:else><view class="empty-tips">空空如也<view data-event-opts="{{[['tap',[['navTo',['/pages/public/logintype']]]]]}}" class="navigator" bindtap="__e">去登陆></view></view></block></view></block><block wx:else><view class="goods-list"><block wx:for="{{cartList}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row"><view data-event-opts="{{[['tap',[['deleteCartItem',['$0','one'],[[['cartList','',index,'sku_id']]]]]]]}}" class="menu" catchtap="__e"><view class="iconfont icon iconiconfontshanchu1 _i"></view></view><view data-event-opts="{{[['touchstart',[['touchStart',[index,'$event']]]],['touchmove',[['touchMove',[index,'$event']]]],['touchend',[['touchEnd',[index,'$event']]]]]}}" class="{{['carrier',theIndex==index?'open':oldIndex==index?'close':'']}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"><view data-event-opts="{{[['tap',[['selected',[index]]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[row.selected?'on':'']}}"></view></view></view><view data-event-opts="{{[['tap',[['navTo',['/pages/product/product?id='+row.product.id]]]]]}}" class="goods-info" bindtap="__e"><view class="img"><image src="{{row.product_img}}"></image></view><view class="info"><view class="title in2line">{{row.product_name}}</view><view data-event-opts="{{[['tap',[['toggleSpec',['$0'],[[['cartList','',index]]]]]]]}}" class="spec" catchtap="__e">{{row.sku_name||'基础版'}}</view><view class="price-number"><view class="price">{{row.sku&&row.sku.price}}</view><view class="number"><view data-event-opts="{{[['tap',[['sub',['$0',index],[[['cartList','',index]]]]]]]}}" class="sub" catchtap="__e"><view class="iconfont icon icon-jianhao _i"></view></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="input" catchtap="__e"><input type="number" data-event-opts="{{[['input',[['__set_model',['$0','number','$event',[]],[[['cartList','',index]]]],['numberChange',['$0','$event',index],[[['cartList','',index]]]]]]]}}" value="{{row.number}}" catchinput="__e"/></view><view data-event-opts="{{[['tap',[['add',['$0',index],[[['cartList','',index]]]]]]]}}" class="add" catchtap="__e"><view class="iconfont icon iconjia1 _i"></view></view></view></view></view></view></view></view></block></view></block><block wx:if="{{cartList.length!==0}}"><view class="footer" style="{{'bottom:'+(footerbottom)+';'}}"><view data-event-opts="{{[['tap',[['allSelect',['$event']]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[isAllselected?'on':'']}}"></view></view><view class="text">全选</view></view><block wx:if="{{selectedList.length>0}}"><view data-event-opts="{{[['tap',[['deleteCartItem',['$event']]]]]}}" class="delBtn del" bindtap="__e">删除</view></block><block wx:if="{{selectedList.length>0}}"><view data-event-opts="{{[['tap',[['clearCart',['$event']]]]]}}" class="delBtn" bindtap="__e">清空</view></block><view class="settlement"><view class="sum">合计:<view class="money">{{"￥"+sumPrice}}</view></view><view data-event-opts="{{[['tap',[['createOrder',['$event']]]]]}}" class="btn" bindtap="__e">{{"结算("+selectedList.length+")"}}</view></view></view></block><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['hideSpec',['$event']]]]]}}" class="{{['popup spec',specClass]}}" catchtouchmove="__e" bindtap="__e"><view data-event-opts="{{[['tap',[['hideSpec',['$event']]]]]}}" class="mask" bindtap="__e"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer attr-content" catchtap="__e"><view class="a-t"><image src="{{showTypeImage||productDetail.picture}}"></image><view class="right"><text class="title">{{productDetail.name}}</text><text class="price">{{"¥"+(currentSkuPrice||productDetail.minSkuPrice)}}</text><text class="stock">{{"库存："+(currentStock||productDetail.stock)+"件"}}</text><block wx:if="{{specSelected.length>0}}"><view class="selected">已选：<block wx:for="{{specSelected}}" wx:for-item="sItem" wx:for-index="sIndex" wx:key="sIndex"><text class="selected-text">{{''+sItem.title+''}}</text></block><text hidden="{{!(specSelected.length>0)}}">{{'* '+cartCount+''}}</text></view></block></view></view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="attr-list"><text>{{item.$orig.title}}</text><view class="item-list"><block wx:for="{{specChildList}}" wx:for-item="childItem" wx:for-index="childIndex" wx:key="childIndex"><block wx:if="{{childItem.base_spec_id===item.$orig.base_spec_id}}"><view data-event-opts="{{[['tap',[['selectSpec',[childIndex,'$0','$1'],[[['specChildList','',childIndex,'base_spec_id']],[['specList','',index,'show_type']]]]]]]}}" class="{{['tit',(childItem.selected)?'selected':'']}}" style="{{(childItem.selected&&item.m0===2?styleObject:'')}}" bindtap="__e"><text hidden="{{!(item.m1===1)}}">{{''+childItem.title+''}}</text><text hidden="{{!(item.m2===2)}}">{{''+childItem.title+''}}</text><view hidden="{{!(item.m3===3)}}"><image class="img" src="{{childItem.data||productDetail.picture}}" mode="aspectFill"></image>{{''+childItem.title+''}}</view></view></block></block></view></view></block><button data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="btn" bindtap="__e">完成</button></view></view><block wx:if="{{loading}}"><rf-loading vue-id="1" bind:__l="__l"></rf-loading></block></view>